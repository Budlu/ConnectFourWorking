{"version":3,"sources":["game.js","menu.js","analysis.js","evalbar.js","index.js"],"names":["Game","props","state","rows","columns","k","column","i","this","board","length","push","index","total_height","getColumn","highlighted","redFirst","best","analysis","lastMove","className","onClick","debugClick","active","playerMove","move","getMoveHeight","updateBoard","elements","renderColumn","React","Component","Column","tile_height","tile","classes","Tile","class","join","Arrow","visible","renderTile","src","process","alt","Menu","playerVersusPlayer","bind","playerVersusComputer","backPVPPVC","whichPlayer","playerFirstMenu","computerFirstMenu","whichColor","redFirstMenu","yellowFirstMenu","startGame","prompt","buttonOneText","buttonOneFunction","buttonTwoText","buttonTwoFunction","backFunction","gameStarted","started","restartGame","playClick","startAnalysis","backFunc","setState","pvpMode","playerFirst","clickElement","sound","document","createElement","setAttribute","style","display","body","appendChild","play","stop","pause","load","catch","error","console","warn","Analysis","history","map","step","jump","EvalBar","height","undefined","p1Height","boxClass","connected","POST_IP","Main","handleData","moveFromColumn","computerMove","updateHistory","updateGame","randomMove","keyDown","toggleDarkMode","onkeydown","darkMode","cname","name","ca","decodeURIComponent","cookie","split","c","charAt","substring","indexOf","getCookie","sheet","gameActive","generateBoard","emptyHighlight","highlightCopy","maximizingPlayer","pvp","gameOver","playerCanMove","status","stylePath","mode","chip","newBoard","JSON","parse","stringify","newHistory","gameState","width","start","clamp","end","every","value","arr","minLeftDiff","min","minRightDiff","n","checkGameOver","playDrop","new_highlighted","highlight","winner","color","redMove","redMessage","yellowMessage","options","method","headers","fetch","then","response","json","data","updatedHistory","percent","validMoves","Math","floor","random","maxHeight","ceil","getElementsByClassName","e","event","window","key","preventDefault","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","setCookie","rel","type","href","target","click","preload","controls","id","row","val","max","x1","x2","drop","setTimeout","tiles","addEventListener","ReactDom","render","getElementById"],"mappings":"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","file":"js/main.de438c8a.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport class Game extends React.Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n\r\n        this.state = {\r\n            rows: props.rows,\r\n            columns: props.columns\r\n        };\r\n    }\r\n\r\n    getColumn(k)\r\n    {\r\n        let column = [];\r\n\r\n        for (let i = 0; i < this.props.board.length; i++)\r\n        {\r\n            column.push(this.props.board[i][k]);\r\n        }\r\n\r\n        return column;\r\n    }\r\n\r\n    renderColumn(i)\r\n    {\r\n        let column = <Column index={i} total_height={this.props.rows} column={this.getColumn(i)} highlighted={this.props.highlighted[i]} redFirst={this.props.redFirst} best={this.props.best} analysis={this.props.analysis} lastMove={this.props.lastMove} />;\r\n        return <ul key={i} className=\"column\"><button onClick={() => this.debugClick(i)}>{column}</button></ul>;\r\n    }\r\n\r\n    getMoveHeight(k)\r\n    {\r\n        let i = this.props.board.length - 1;\r\n\r\n        while (i >= 0)\r\n        {\r\n            if (!this.props.board[i][k])\r\n                return i;\r\n\r\n            i -= 1;\r\n        }\r\n\r\n        return i;\r\n    }\r\n\r\n    debugClick(i)\r\n    {\r\n        if (!this.props.active)\r\n            return;\r\n\r\n        if (!this.props.playerMove)\r\n            return;\r\n        \r\n        let move = this.getMoveHeight(i);\r\n        if (move === -1)\r\n            return;\r\n        \r\n        this.props.updateBoard(move, i);\r\n    }\r\n\r\n    render()\r\n    {\r\n        let elements = [];\r\n        for (let i = 0; i < this.state.columns; i++)\r\n        {\r\n            elements.push(this.renderColumn(i));\r\n        }\r\n\r\n        return <div className=\"game\">{elements}</div>\r\n    }\r\n}\r\n\r\nclass Column extends React.Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.state = {\r\n            index: props.index,\r\n            total_height: props.total_height,\r\n            tile_height: props.tile_height\r\n        }\r\n    }\r\n\r\n    renderTile(i)\r\n    {\r\n        let tile = this.props.column[i];\r\n        let classes = [\"tile\"]\r\n\r\n        if (tile === 1)\r\n        {\r\n            if (this.props.redFirst)\r\n                classes.push(\"red\")\r\n            else\r\n                classes.push(\"yellow\")\r\n        }\r\n        else if (tile === -1)\r\n        {\r\n            if (this.props.redFirst)\r\n                classes.push(\"yellow\")\r\n            else\r\n                classes.push(\"red\")\r\n        }\r\n\r\n        return <Tile key={i} class={classes.join(' ')} highlighted={this.props.highlighted[i]} />;\r\n    }\r\n\r\n    render()\r\n    {\r\n        let elements = [];\r\n\r\n        if (this.props.analysis && this.props.best === this.props.index && !this.props.lastMove)\r\n            elements.push(<Arrow visible={true} key={this.props.total_height} />);\r\n        else\r\n            elements.push(<Arrow visible={false} key={this.props.total_height} />);\r\n\r\n        for (let i = 0; i < this.props.total_height; i++)\r\n        {\r\n            elements.push(this.renderTile(i));\r\n        }\r\n\r\n        return elements;\r\n    }\r\n}\r\n\r\nfunction Arrow(props)\r\n{\r\n    let classes = [\"arrow\"];\r\n    if (!props.visible)\r\n        classes.push(\"invisible\");\r\n\r\n    return <img src={process.env.PUBLIC_URL + \"/Arrow.png\"} className={classes.join(' ')} alt=\"\" />\r\n}\r\n\r\nfunction Tile(props)\r\n{\r\n    let classes = [props.class];\r\n    if (props.highlighted)\r\n        classes.push(\"highlighted\");\r\n\r\n    return <li key={props.i} className={classes.join(' ')}></li>\r\n}\r\n","import React from \"react\";\r\n\r\nexport class Menu extends React.Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n\r\n        this.playerVersusPlayer = this.playerVersusPlayer.bind(this);\r\n        this.playerVersusComputer = this.playerVersusComputer.bind(this);\r\n        this.backPVPPVC = this.backPVPPVC.bind(this);\r\n\r\n        this.whichPlayer = this.whichPlayer.bind(this);\r\n        this.playerFirstMenu = this.playerFirstMenu.bind(this);\r\n        this.computerFirstMenu = this.computerFirstMenu.bind(this);\r\n\r\n        this.whichColor = this.whichColor.bind(this);\r\n        this.redFirstMenu = this.redFirstMenu.bind(this);\r\n        this.yellowFirstMenu = this.yellowFirstMenu.bind(this);\r\n\r\n        this.startGame = this.startGame.bind(this);\r\n\r\n        this.state = {\r\n            prompt: \"Select a mode: \",\r\n            buttonOneText: \"Player v. Player\",\r\n            buttonOneFunction: this.playerVersusPlayer,\r\n            buttonTwoText: \"Player v. Computer\",\r\n            buttonTwoFunction: this.playerVersusComputer,\r\n            backFunction: function(){},\r\n            gameStarted: false\r\n        }\r\n    }\r\n\r\n    render()\r\n    {\r\n        if (!this.state.gameStarted)\r\n        {\r\n            return (\r\n                <div className=\"menu\">\r\n                    {this.state.prompt}<br/>\r\n                    <button onClick={() => {this.state.buttonOneFunction(); playClick();} }>{this.state.buttonOneText}</button><br/>\r\n                    <button onClick={() => {this.state.buttonTwoFunction(); playClick();} }>{this.state.buttonTwoText}</button><br/>\r\n                    <button onClick={() => {this.state.backFunction(); playClick();} }>Back</button><br/>\r\n                </div>\r\n            );\r\n        }\r\n        else if (this.props.visible && !this.props.started)\r\n        {\r\n            return (\r\n                <div className=\"menu\">\r\n                    <button onClick={() => {this.restartGame(); playClick();} }>Restart Game</button><br/>\r\n                    <button onClick={() => {this.props.startAnalysis(); playClick();} }>Start Analysis</button>\r\n                </div>\r\n            );\r\n        }\r\n        else\r\n        {\r\n            return (\r\n                <div className=\"menu\">\r\n                    <button onClick={() => {this.restartGame(); playClick();} }>Restart Game</button>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    whichColor(backFunc)\r\n    {\r\n        this.setState({\r\n            prompt: \"Which color goes first: \",\r\n            buttonOneText: \"Red\",\r\n            buttonOneFunction: this.redFirstMenu,\r\n            buttonTwoText: \"Yellow\",\r\n            buttonTwoFunction: this.yellowFirstMenu,\r\n            backFunction: backFunc\r\n        });\r\n    }\r\n    \r\n    whichPlayer()\r\n    {\r\n        this.setState({\r\n            prompt: \"Who goes first: \",\r\n            buttonOneText: \"Player\",\r\n            buttonOneFunction: this.playerFirstMenu,\r\n            buttonTwoText: \"Computer\",\r\n            buttonTwoFunction: this.computerFirstMenu,\r\n            backFunction: this.backPVPPVC\r\n        });\r\n    }\r\n\r\n    backPVPPVC()\r\n    {\r\n        this.setState({\r\n            prompt: \"Select a mode: \",\r\n            buttonOneText: \"Player v. Player\",\r\n            buttonOneFunction: this.playerVersusPlayer,\r\n            buttonTwoText: \"Player v. Computer\",\r\n            buttonTwoFunction: this.playerVersusComputer,\r\n            backFunction: function(){}\r\n        });\r\n    }\r\n\r\n    startGame()\r\n    {\r\n        this.props.startGame();\r\n        this.setState({gameStarted: true});\r\n    }\r\n\r\n    playerVersusPlayer()\r\n    {\r\n        this.props.pvpMode(true);\r\n        this.whichColor(this.backPVPPVC);\r\n    }\r\n\r\n    playerVersusComputer()\r\n    {\r\n        this.props.pvpMode(false);\r\n        this.whichPlayer();\r\n    }\r\n\r\n    playerFirstMenu()\r\n    {\r\n        this.props.playerFirst(true);\r\n        this.whichColor(this.whichPlayer);\r\n    }\r\n\r\n    computerFirstMenu()\r\n    {\r\n        this.props.playerFirst(false);\r\n        this.whichColor(this.whichPlayer);\r\n    }\r\n\r\n    redFirstMenu()\r\n    {\r\n        this.props.redFirst(true);\r\n        this.startGame();\r\n    }\r\n\r\n    yellowFirstMenu()\r\n    {\r\n        this.props.redFirst(false);\r\n        this.startGame();\r\n    }\r\n\r\n    restartGame()\r\n    {\r\n        this.props.restartGame();\r\n        this.backPVPPVC();\r\n        this.setState({gameStarted: false});\r\n    }\r\n}\r\n\r\nlet clickElement = new soundEffect(process.env.PUBLIC_URL + \"/click.mp3\");\r\n\r\nfunction soundEffect(src)\r\n{\r\n    this.sound = document.createElement(\"audio\");\r\n    this.sound.src = src;\r\n    this.sound.setAttribute(\"preload\", \"auto\");\r\n    this.sound.setAttribute(\"controls\", \"none\");\r\n    this.sound.setAttribute(\"id\", \"sound\")\r\n    this.sound.style.display = \"none\";\r\n    document.body.appendChild(this.sound);\r\n    this.play = function() { this.sound.play(); }\r\n    this.stop = function() { this.sound.pause(); }\r\n}\r\n\r\nfunction playClick()\r\n{\r\n    clickElement.sound.load();\r\n    clickElement.sound.play()\r\n    .catch(error => {console.warn(\"Click sound failed\")});\r\n}","import React from \"react\";\r\n\r\nexport class Analysis extends React.Component\r\n{\r\n    render()\r\n    {\r\n        if (this.props.visible)\r\n        {\r\n            let elements = this.props.history.map((board, step) => {\r\n                let classes = [\"analysis-button\"];\r\n\r\n                if (step === this.props.index)\r\n                    classes.push(\"highlighted\");\r\n\r\n                if (step === 0)\r\n                {\r\n                    return (\r\n                        <li key={step}>\r\n                            <button onClick={() => this.props.jump(step)} className={classes.join(' ')} >Start</button>\r\n                        </li>\r\n                    )\r\n                }\r\n                return (\r\n                    <li key={step}>\r\n                        <button onClick={() => this.props.jump(step)} className={classes.join(' ')} >Move {step}</button>\r\n                    </li>\r\n                );\r\n            });\r\n\r\n            return <div className=\"analysis\">{elements}</div>;\r\n        }\r\n        else\r\n            return <div className=\"analysis\"></div>;\r\n    }\r\n\r\n    startAnalysis()\r\n    {\r\n        this.setState({started: true});\r\n    }\r\n}","import React from \"react\";\r\n\r\nexport class EvalBar extends React.Component\r\n{   \r\n    render()\r\n    {\r\n        if (!this.props.analysis)\r\n            return \"\";\r\n\r\n        let height = -1;\r\n        if (this.props.p1Height !== undefined)\r\n        {\r\n            if (this.props.redFirst)\r\n            {\r\n                height = this.props.p1Height;\r\n            }\r\n            else\r\n            {\r\n                height = 100 - this.props.p1Height;\r\n            }\r\n        }\r\n\r\n        let boxClass = \"\";\r\n        if (!this.props.connected && height === -1)\r\n            boxClass = \"blank-box\"\r\n        else\r\n            boxClass = \"eval-box\";\r\n\r\n        return (\r\n                <div className={boxClass}>\r\n                    <div className=\"eval-red\" style={{height: height + '%'}}></div>\r\n                </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport { Game } from \"./game.js\";\r\nimport { Menu } from \"./menu.js\";\r\nimport { Analysis } from \"./analysis.js\";\r\nimport { EvalBar } from \"./evalbar.js\";\r\n\r\nconst POST_IP = \"percent\";\r\nconst ANALYSIS_COLUMNS = 3;\r\nconst BUTTON_HEIGHT = 40;\r\nconst DROP_TIME = 125;\r\n\r\nclass Main extends React.Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n\r\n        this.pvpMode = this.pvpMode.bind(this);\r\n        this.playerFirst = this.playerFirst.bind(this);\r\n        this.redFirst = this.redFirst.bind(this);\r\n\r\n        this.startGame = this.startGame.bind(this);\r\n        this.handleData = this.handleData.bind(this);\r\n        this.moveFromColumn = this.moveFromColumn.bind(this);\r\n        this.computerMove = this.computerMove.bind(this);\r\n        this.updateBoard = this.updateBoard.bind(this);\r\n        this.updateHistory = this.updateHistory.bind(this);\r\n        this.updateGame = this.updateGame.bind(this);\r\n        this.restartGame = this.restartGame.bind(this);\r\n        this.randomMove = this.randomMove.bind(this);\r\n        this.jump = this.jump.bind(this);\r\n        this.startAnalysis = this.startAnalysis.bind(this)\r\n        this.keyDown = this.keyDown.bind(this);\r\n        this.toggleDarkMode = this.toggleDarkMode.bind(this);\r\n\r\n        document.onkeydown = this.keyDown;\r\n\r\n        let darkMode = getCookie(\"darkMode\");\r\n        let sheet = \"\";\r\n        if (darkMode === \"true\")\r\n        {\r\n            darkMode = true;\r\n            sheet = \"/dark.css\";\r\n        }\r\n        else\r\n        {\r\n            darkMode = false;\r\n            sheet = \"/style.css\";\r\n        }\r\n\r\n        this.state = {\r\n            rows: 6,\r\n            columns: 7,\r\n            gameActive: false,\r\n            board: generateBoard(6,7),\r\n            highlighted: generateBoard(7, 6),\r\n            emptyHighlight: generateBoard(7, 6),\r\n            highlightCopy: generateBoard(7, 6),\r\n            maximizingPlayer: true,\r\n            pvp: true,\r\n            playerFirst: true,\r\n            redFirst: true,\r\n            gameOver: false,\r\n            playerCanMove: true,\r\n            status: \"Pick your settings\",\r\n            history: [{\"board\": generateBoard(6, 7)}],\r\n            analysis: false,\r\n            index: 0,\r\n            lastMove: false,\r\n            connected: false,\r\n            stylePath: sheet,\r\n            darkMode: darkMode\r\n        }\r\n    }\r\n\r\n    pvpMode(mode)\r\n    {\r\n        this.setState({pvp: mode})\r\n    }\r\n\r\n    playerFirst(mode)\r\n    {\r\n        this.setState({playerFirst: mode});\r\n    }\r\n\r\n    redFirst(mode)\r\n    {\r\n        this.setState({redFirst: mode});\r\n    }\r\n\r\n    startGame()\r\n    {\r\n        this.setState({gameActive: true, playerCanMove: this.state.playerFirst}, this.updateGame);\r\n    }\r\n\r\n    updateBoard(i, k)\r\n    {\r\n        let chip = 0;\r\n        if (this.state.maximizingPlayer)\r\n            chip = 1;\r\n        else\r\n            chip = -1;\r\n\r\n        let newBoard = JSON.parse(JSON.stringify(this.state.board));\r\n        newBoard[i][k] = chip;\r\n\r\n        let newHistory = this.state.history;\r\n        newHistory.push({\"board\": newBoard});\r\n        this.setState({history: newHistory, index: this.state.index + 1});\r\n\r\n        let gameState = checkGameOver(newBoard, i, k);\r\n\r\n        if (gameState === 2)\r\n        {\r\n            this.setState({board: newBoard, maximizingPlayer: !this.state.maximizingPlayer, gameActive: false, gameOver: true, status: \"It's a draw\"});\r\n            playDrop();\r\n\r\n            return;\r\n        }\r\n        else if (gameState !== 0)\r\n        {\r\n            let new_highlighted = generateBoard(this.state.columns, this.state.rows);\r\n\r\n            for (let highlight of gameState)\r\n            {\r\n                new_highlighted[highlight[1]][highlight[0]] = 1;\r\n            }\r\n\r\n            let winner = \"\";\r\n            let color = \"\";\r\n            if (redMove(this.state.maximizingPlayer, this.state.redFirst))\r\n            {\r\n                winner = \"Red\";\r\n                color = \"red\";\r\n            }\r\n            else\r\n            {\r\n                winner = \"Yellow\";\r\n                color = \"yellow\";\r\n            }\r\n\r\n            let highlightCopy = JSON.parse(JSON.stringify(new_highlighted));\r\n            this.setState({board: newBoard, maximizingPlayer: !this.state.maximizingPlayer, gameActive: false, gameOver: true, highlighted: new_highlighted, highlightCopy: highlightCopy, status: <span style={{color: color}}>{winner} wins!</span>});\r\n            playDrop();\r\n\r\n            return;\r\n        }\r\n\r\n        if (!this.state.pvp)\r\n            this.setState({board: newBoard, maximizingPlayer: !this.state.maximizingPlayer, playerCanMove: !this.state.playerCanMove}, this.updateGame);\r\n        else\r\n            this.setState({board: newBoard, maximizingPlayer: !this.state.maximizingPlayer}, this.updateGame);\r\n\r\n        playDrop();\r\n    }\r\n\r\n    updateGame()\r\n    {\r\n        let redMessage = <span style={{color: \"red\"}}>Red's move</span>;\r\n        let yellowMessage = <span style={{color: \"yellow\"}}>Yellow's move</span>;\r\n\r\n        if (redMove(this.state.maximizingPlayer, this.state.redFirst))\r\n        {\r\n            this.setState({status: redMessage});\r\n        }\r\n        else\r\n        {\r\n            this.setState({status: yellowMessage});\r\n        }\r\n\r\n        if (!this.state.pvp && !this.state.playerCanMove)\r\n        {\r\n            this.computerMove();\r\n        }\r\n    }\r\n\r\n    restartGame()\r\n    {\r\n        this.setState({gameActive: false, board: generateBoard(6,7), highlighted: generateBoard(7,6), highlightCopy: generateBoard(7, 6), maximizingPlayer: true, gameOver: false, playerCanMove: true, playerFirst: true, status: \"Pick your settings\", history: [{\"board\": generateBoard(6, 7)}], analysis: false, index: 0, lastMove: false});\r\n    }\r\n\r\n    computerMove()\r\n    {\r\n        let options = {method: 'POST', mode: 'cors', headers: {'Content-Type': 'application/json', 'Access-Control-Allow-Origin': '*'}, body: JSON.stringify(this.state.board)};\r\n\t\r\n        fetch(POST_IP, options)\r\n        .then(response => response.json())\r\n        .then(data => { this.handleData(data) } )\r\n        .catch(error => { this.randomMove(); } );\r\n    }\r\n\r\n    handleData(data)\r\n    {\r\n        if (!this.state.gameActive)\r\n            return;\r\n\r\n        let updatedHistory = this.state.history;\r\n        updatedHistory[updatedHistory.length - 1][\"best\"] = data.best;\r\n        updatedHistory[updatedHistory.length - 1][\"percent\"] = data.percent;\r\n\r\n        this.moveFromColumn(data.best);\r\n        this.setState({history: updatedHistory})\r\n    }\r\n\r\n    randomMove()\r\n    {\r\n        if (!this.state.gameActive)\r\n            return;\r\n\r\n        let validMoves = [];\r\n\r\n        for (let k = 0; k < this.state.board[0].length; k++)\r\n        {\r\n            if (this.state.board[0][k] === 0)\r\n                validMoves.push(k);\r\n        }\r\n\r\n        let index = Math.floor(Math.random() * validMoves.length);\r\n\r\n        this.moveFromColumn(index);\r\n    }\r\n\r\n    moveFromColumn(k)\r\n    {\r\n        let i = this.state.board.length - 1;\r\n\r\n        while (i >= 0)\r\n        {\r\n            if (!this.state.board[i][k])\r\n            {\r\n                this.updateBoard(i, k);\r\n                return;\r\n            }\r\n\r\n            i -= 1;\r\n        }\r\n\r\n        this.updateBoard(i, k);\r\n    }\r\n\r\n    jump(i)\r\n    {\r\n        if (i > this.state.index)\r\n            playDrop();\r\n\r\n        if (i === this.state.history.length - 1)\r\n        {\r\n            this.setState({board: this.state.history[i][\"board\"], highlighted: this.state.highlightCopy, index: i, lastMove: true})\r\n        }\r\n        else\r\n        {\r\n            this.setState({board: this.state.history[i][\"board\"], highlighted: this.state.emptyHighlight, index: i, lastMove: false});\r\n        }\r\n    }\r\n\r\n    updateHistory(data, i)\r\n    {\r\n        if (!this.state.analysis)\r\n            return;\r\n\r\n        let newHistory = this.state.history;\r\n        newHistory[i][\"percent\"] = data[\"percent\"];\r\n        newHistory[i][\"best\"] = data[\"best\"];\r\n\r\n        this.setState({history: newHistory, connected: true});\r\n    }\r\n\r\n    startAnalysis()\r\n    {\r\n        this.setState({analysis: true});\r\n\r\n        let maxHeight = Math.ceil(this.state.history.length / ANALYSIS_COLUMNS) * BUTTON_HEIGHT;\r\n        let analysis = document.getElementsByClassName(\"analysis\")[0];\r\n        analysis.style.maxHeight = maxHeight + \"px\";\r\n\r\n        for (let i = 0; i < this.state.history.length; i++)\r\n        {\r\n            if (this.state.history[i][\"percent\"] === undefined)\r\n            {\r\n                let options = {method: 'POST', mode: 'cors', headers: {'Content-Type': 'application/json', 'Access-Control-Allow-Origin': '*'}, body: JSON.stringify(this.state.history[i][\"board\"])};\r\n\r\n                fetch(POST_IP, options)\r\n                .then(response => response.json())\r\n                .then(data => { this.updateHistory(data, i); } )\r\n                .catch(error => { this.setState({connected: false}); } );\r\n            }\r\n        }\r\n\r\n        this.jump(0);\r\n    }\r\n\r\n    keyDown(e)\r\n    {\r\n        let event = window.event ? window.event : e;\r\n\r\n        if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\" || event.key === \"s\" || event.key === \"d\")\r\n        {\r\n            if (this.state.analysis && this.state.index < (this.state.history.length - 1))\r\n                this.jump(this.state.index + 1);\r\n\r\n            event.preventDefault();\r\n        }\r\n        else if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\" || event.key === \"w\" || event.key === \"a\")\r\n        {\r\n            if (this.state.analysis && this.state.index > 0)\r\n                this.jump(this.state.index - 1);\r\n\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    toggleDarkMode()\r\n    {\r\n        let mode = !this.state.darkMode;\r\n\r\n        if (mode)\r\n            this.setState({darkMode: mode, stylePath: \"/dark.css\"});\r\n        else\r\n            this.setState({darkMode: mode, stylePath: \"/style.css\"});\r\n\r\n        setCookie(\"darkMode\", mode, 365 * 10);\r\n    }\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div className=\"container\">\r\n                <link rel=\"stylesheet\" type=\"text/css\" href={ process.env.PUBLIC_URL + this.state.stylePath } />\r\n                <h1>Connect Four</h1>\r\n                <div className=\"credits\">\r\n                    Matthew Rubino - <a href=\"https://github.com/Budlu/ConnectFour\" target=\"_blank\" rel=\"noreferrer\">https://github.com/Budlu/ConnectFour</a>\r\n                </div>\r\n                <div className=\"content\" >\r\n                    <div className=\"column-1\">\r\n                        <Menu pvpMode={this.pvpMode} playerFirst={this.playerFirst} redFirst={this.redFirst} startGame={this.startGame} restartGame={this.restartGame} visible={this.state.gameOver} started={this.state.analysis} startAnalysis={this.startAnalysis} />\r\n                        <Analysis visible={this.state.analysis} history={this.state.history} jump={this.jump} index={this.state.index} />\r\n                    </div>\r\n                    <div className=\"column-2\">\r\n                        <h2>{this.state.status}</h2>\r\n                        <EvalBar redFirst={this.state.redFirst} p1Height={this.state.history[this.state.index][\"percent\"]} analysis={this.state.analysis} connected={this.state.connected} />\r\n                        <Game rows={6} columns={7} board={this.state.board} highlighted={this.state.highlighted} updateBoard={this.updateBoard} active={this.state.gameActive} redFirst={this.state.redFirst} playerMove={this.state.playerCanMove} analysis={this.state.analysis} best={this.state.history[this.state.index][\"best\"]} lastMove={this.state.lastMove} connected={this.state.connected} />\r\n                    </div>\r\n                </div>\r\n                <button className=\"dark-mode\" onClick={() => {this.toggleDarkMode(); playClick();} }>O</button>\r\n                <audio src={process.env.PUBLIC_URL + \"/click.mp3\"} preload=\"auto\" controls=\"none\" id=\"sound\" style={{display: \"none\"}} className=\"click-source\" />\r\n                <audio src={process.env.PUBLIC_URL + \"/drop.mp3\"} preload=\"auto\" controls=\"none\" id=\"sound\" style={{display: \"none\"}} className=\"drop-source\" />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction generateBoard(rows, columns)\r\n{\r\n    let board = [];\r\n\r\n    for (let i = 0; i < rows; i++)\r\n    {\r\n        let row = [];\r\n        for (let k = 0; k < columns; k++)\r\n        {\r\n            row.push(0);\r\n        }\r\n        board.push(row);\r\n    }\r\n\r\n    return board;\r\n}\r\n\r\nfunction checkGameOver(board, i, k)\r\n{\r\n    let height = board.length;\r\n    let width = board[0].length;\r\n\r\n    // Horizontal Win Check\r\n    let start = clamp(k-3, 0, width - 4);\r\n    let end = clamp(k, 0, width - 4);\r\n\r\n    while (start <= end)\r\n    {\r\n        let tiles = [board[i][start], board[i][start + 1], board[i][start + 2], board[i][start + 3]];\r\n        if (tiles.every((value, i, arr) => value === arr[0]))\r\n            return [[i, start], [i, start + 1], [i, start + 2], [i, start + 3]];\r\n        \r\n        start += 1;\r\n    }\r\n\r\n    // Vertical Win Check\r\n    if (i <= height - 4)\r\n    {\r\n        let tiles = [board[i][k], board[i + 1][k], board[i + 2][k], board[i + 3][k]];\r\n        if (tiles.every((value, i, arr) => value === arr[0]))\r\n            return [[i, k], [i + 1, k], [i + 2, k], [i + 3, k]];\r\n    }\r\n\r\n    // Diagonal Win Check (TL to BR)\r\n    let minLeftDiff = min(i, k);\r\n    start = clamp(minLeftDiff, 0, 3);\r\n\r\n    let minRightDiff = min(height - i - 1, width - k - 1);\r\n    end = clamp(3 - minRightDiff, 0, 3)\r\n\r\n    while (start >= end)\r\n    {\r\n        let tiles = [board[i - start][k - start], board[i - start + 1][k - start + 1], board[i - start + 2][k - start + 2], board[i - start + 3][k - start + 3]];\r\n        if (tiles.every((value, i, arr) => value === arr[0]))\r\n            return [[i - start, k - start], [i - start + 1, k - start + 1], [i - start + 2, k - start + 2], [i - start + 3, k - start + 3]];\r\n\r\n        start -= 1;\r\n    }\r\n\r\n    // Diagonal Win Check (TR to BL)\r\n    minLeftDiff = min(height - i - 1, k)\r\n    minRightDiff = min(i, width - k - 1)\r\n\r\n    start = clamp(minRightDiff, 0, 3)\r\n    end = clamp(3 - minLeftDiff, 0, 3)\r\n\r\n    while (start >= end)\r\n    {\r\n        let tiles = [board[i - start][k + start], board[i - start + 1][k + start - 1], board[i - start + 2][k + start - 2], board[i - start + 3][k + start - 3]];\r\n        if (tiles.every((value, i, arr) => value === arr[0]))\r\n            return [[i - start, k + start], [i - start + 1, k + start - 1], [i - start + 2, k + start - 2], [i - start + 3, k + start - 3]];\r\n\r\n        start -= 1;\r\n    }\r\n\r\n    for (let n = 0; n < width; n++)\r\n    {\r\n        if (!board[0][n])\r\n            return 0;\r\n    }\r\n\r\n    return 2;\r\n}\r\n\r\nfunction clamp(val, min, max)\r\n{\r\n    if (val >= max)\r\n        return max;\r\n    else if (val <= min)\r\n        return min;\r\n    else\r\n        return val;\r\n}\r\n\r\nfunction min(x1, x2)\r\n{\r\n    if (x1 < x2)\r\n        return x1;\r\n    else\r\n        return x2;\r\n}\r\n\r\nfunction redMove(maximizingPlayer, redFirst)\r\n{\r\n    if (redFirst)\r\n    {\r\n        if (maximizingPlayer)\r\n            return true;\r\n        return false;\r\n    }\r\n    else\r\n    {\r\n        if (maximizingPlayer)\r\n            return false;\r\n        return true;\r\n    }\r\n}\r\n\r\nfunction playDrop()\r\n{\r\n    let drop = document.getElementsByClassName(\"drop-source\")[0];\r\n    setTimeout(function() {\r\n        drop.load();\r\n        drop.play()\r\n        .catch(error => {console.warn(error)});\r\n    }, DROP_TIME);\r\n}\r\n\r\nfunction playClick()\r\n{\r\n    let click = document.getElementsByClassName(\"click-source\")[0];\r\n    click.load();\r\n    click.play()\r\n    .catch(error => {console.warn(error)});\r\n}\r\n\r\nfunction setCookie(cname, cvalue, exdays)\r\n{\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\"+d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n  }\r\n\r\nfunction getCookie(cname)\r\n{\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for(var i = 0; i <ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') {\r\n        c = c.substring(1);\r\n      }\r\n      if (c.indexOf(name) === 0) {\r\n        return c.substring(name.length, c.length);\r\n      }\r\n    }\r\n    return \"\";\r\n}\r\n\r\nlet tiles = document.getElementsByClassName(\"tile\");\r\nfor (let tile of tiles)\r\n{\r\n    tile.addEventListener(\"animationend\", dropAnimationEnd());\r\n}\r\n\r\nfunction dropAnimationEnd()\r\n{\r\n    playDrop();\r\n}\r\n\r\nReactDom.render(<Main />, document.getElementById(\"root\"));"],"sourceRoot":""}